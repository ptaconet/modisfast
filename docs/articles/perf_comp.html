<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>4. Comparison of performance with other similar R packages • modisfast</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="4. Comparison of performance with other similar R packages">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">modisfast</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.9.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/get_started.html">1. Get started</a>
    </li>
    <li>
      <a href="../articles/modisfast2.html">2. Get data on several regions or periods of interest simultaneously</a>
    </li>
    <li>
      <a href="../articles/perf_comp.html">4. Comparison of performance with other similar R packages</a>
    </li>
    <li>
      <a href="../articles/use_case.html">3. Full use case</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ptaconet/modisfast/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>4. Comparison of performance with other similar
R packages</h1>
                        <h4 data-toc-skip class="author">Paul
Taconet</h4>

            <h4 data-toc-skip class="date">2024-11-09</h4>

      <small class="dont-index">Source: <a href="https://github.com/ptaconet/modisfast/blob/HEAD/vignettes/articles/perf_comp.Rmd" class="external-link"><code>vignettes/articles/perf_comp.Rmd</code></a></small>
      <div class="hidden name"><code>perf_comp.Rmd</code></div>

    </div>



<!--  To render this vignette, use : rmarkdown::render("vignettes/articles/perf_comp.Rmd", params = "ask") -->
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ptaconet/modisfast" class="external-link">modisfast</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/bluegreen-labs/appeears" class="external-link">appeears</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/MODIStsp" class="external-link">MODIStsp</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/bluegreen-labs/MODISTools" class="external-link">MODISTools</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/" class="external-link">terra</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/csgillespie/benchmarkme" class="external-link">benchmarkme</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The goal of this exercise is to evaluate the performance of various R
packages designed for accessing MODIS data, specifically focusing on
data access and import times. To do this, we will download and import a
one-year monthly time series of MODIS Normalized Difference Vegetation
Index (NDVI) at a 1 km spatial resolution for the entire country of
Madagascar.</p>
</div>
<div class="section level2">
<h2 id="other-r-packages-available-for-accessing-modis-data">Other R packages available for accessing MODIS data<a class="anchor" aria-label="anchor" href="#other-r-packages-available-for-accessing-modis-data"></a>
</h2>
<p>The <a href="https://github.com/fdetsch/MODIS" class="external-link"><code>MODIS</code></a>
package offers access to some MODIS data through global online data
archives, but it lacks comprehensive documentation and was removed from
the CRAN repository in 2023 for policy violations. Furthermore, some of
its dependencies are not available anymore on CRAN.</p>
<p>The <a href="https://github.com/ropensci/MODIStsp" class="external-link"><code>MODIStsp</code></a>
package provides both a command-line and a user-friendly graphical
interface to extract MODIS data in standard TIFF or original HDF
formats. However, it does not allow to extract data at a sub-tile level
(i.e. spatial subsetting capabilities are limited), and it was also
removed from the CRAN repository in 2023 at the maintainer’s
request.</p>
<p>The <a href="https://github.com/ropensci/MODISTools" class="external-link"><code>MODIStools</code></a>
package serves as a programmatic interface to the <a href="https://modis.ornl.gov/data/modis_webservice.html" class="external-link">‘MODIS Land
Products Subsets’ web service</a>, providing access to 46 MODIS and
VIIRS collections. This package, available on CRAN, extracts data at
specific points or buffer zones around a point. However, for area-based
queries, the maximum area size is 200 km x 200 km. This makes it
suitable for point-based data extraction but less effective for wide
area-based queries.</p>
<p>The <a href="https://github.com/bluegreen-labs/appeears" class="external-link"><code>appeears</code></a>
package acts as a programmatic interface to the <a href="https://appeears.earthdatacloud.nasa.gov/" class="external-link">NASA AppEEARS API</a>
services. AppEEARS is a NASA-built application that offers a simple and
efficient way to access and transform geospatial data from a variety of
federal data archives (including MODIS and VIIRS, but not GPM). AppEEARS
allows accessing data from various NASA federal archives, including
MODIS and VIIRS, and enables users to subset geospatial datasets using
spatial, temporal, and band/layer parameters. Indeed, as for
<code>modisfast</code>, AppEEARS uses OPeNDAP. While similar to
<code>modisfast</code>, <code>appeears</code> offers a broader range of
data sources but has a latency period (ranging from minutes to hours)
for query processing due to server-side post-processing (mosaicking,
reprojection, etc.).</p>
<p>Finally, some R packages, such as <a href="https://github.com/r-spatial/rgee" class="external-link"><code>rgee</code></a> <span class="citation">[@rgee]</span>, rely on proprietary software or data
access protocols and are not discussed here for that reason.</p>
</div>
<div class="section level2">
<h2 id="system-benchmarking">System benchmarking<a class="anchor" aria-label="anchor" href="#system-benchmarking"></a>
</h2>
<p>Before proceeding to the test, some system benchmarking :</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.time</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "2024-11-09 10:08:28 CET"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.info.html" class="external-link">Sys.info</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;                                                            sysname </span></span>
<span><span class="co">#&gt;                                                            "Linux" </span></span>
<span><span class="co">#&gt;                                                            release </span></span>
<span><span class="co">#&gt;                                                 "6.8.0-48-generic" </span></span>
<span><span class="co">#&gt;                                                            version </span></span>
<span><span class="co">#&gt; "#48~22.04.1-Ubuntu SMP PREEMPT_DYNAMIC Mon Oct  7 11:24:13 UTC 2" </span></span>
<span><span class="co">#&gt;                                                           nodename </span></span>
<span><span class="co">#&gt;                                           "ptaconet-Latitude-7490" </span></span>
<span><span class="co">#&gt;                                                            machine </span></span>
<span><span class="co">#&gt;                                                           "x86_64" </span></span>
<span><span class="co">#&gt;                                                              login </span></span>
<span><span class="co">#&gt;                                                         "ptaconet" </span></span>
<span><span class="co">#&gt;                                                               user </span></span>
<span><span class="co">#&gt;                                                         "ptaconet" </span></span>
<span><span class="co">#&gt;                                                     effective_user </span></span>
<span><span class="co">#&gt;                                                         "ptaconet"</span></span>
<span><span class="fu">benchmarkme</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/benchmarkme/man/get_r_version.html" class="external-link">get_r_version</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; $platform</span></span>
<span><span class="co">#&gt; [1] "x86_64-pc-linux-gnu"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $arch</span></span>
<span><span class="co">#&gt; [1] "x86_64"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $os</span></span>
<span><span class="co">#&gt; [1] "linux-gnu"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $system</span></span>
<span><span class="co">#&gt; [1] "x86_64, linux-gnu"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $status</span></span>
<span><span class="co">#&gt; [1] ""</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $major</span></span>
<span><span class="co">#&gt; [1] "4"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $minor</span></span>
<span><span class="co">#&gt; [1] "4.0"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $year</span></span>
<span><span class="co">#&gt; [1] "2024"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $month</span></span>
<span><span class="co">#&gt; [1] "04"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $day</span></span>
<span><span class="co">#&gt; [1] "24"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $`svn rev`</span></span>
<span><span class="co">#&gt; [1] "86474"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $language</span></span>
<span><span class="co">#&gt; [1] "R"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $version.string</span></span>
<span><span class="co">#&gt; [1] "R version 4.4.0 (2024-04-24)"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $nickname</span></span>
<span><span class="co">#&gt; [1] "Puppy Cup"</span></span>
<span><span class="fu">benchmarkme</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/benchmarkme/man/get_cpu.html" class="external-link">get_cpu</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; $vendor_id</span></span>
<span><span class="co">#&gt; [1] "GenuineIntel"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $model_name</span></span>
<span><span class="co">#&gt; [1] "Intel(R) Core(TM) i7-8650U CPU @ 1.90GHz"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $no_of_cores</span></span>
<span><span class="co">#&gt; [1] 8</span></span>
<span><span class="fu">benchmarkme</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/benchmarkme/man/get_ram.html" class="external-link">get_ram</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; 33.5 GB</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="appeears">
<code>appeears</code><a class="anchor" aria-label="anchor" href="#appeears"></a>
</h2>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">appears_start_time</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.time</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">roi</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="st">"madagascar"</span>, geom <span class="op">=</span> <span class="st">"POLYGON((41.95 -11.37,51.26 -11.37,51.26 -26.17,41.95 -26.17,41.95 -11.37))"</span><span class="op">)</span>, wkt<span class="op">=</span><span class="st">"geom"</span>, crs <span class="op">=</span> <span class="fl">4326</span><span class="op">)</span> </span>
<span><span class="va">time_range</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2023-01-01"</span>,<span class="st">"2023-12-31"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">collection</span> <span class="op">&lt;-</span> <span class="st">"MOD13A3.061"</span>  </span>
<span><span class="va">variables</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"_1_km_monthly_NDVI"</span><span class="op">)</span> </span>
<span></span>
<span><span class="co"># Replace Sys.getenv("earthdata_un") and Sys.getenv("earthdata_pw") below by your Earthdata credentials  (see https://github.com/bluegreen-labs/appeears#use to setup an appeears connection)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/appeears/man/rs_set_key.html" class="external-link">rs_set_key</a></span><span class="op">(</span></span>
<span>  user <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"earthdata_un"</span><span class="op">)</span>,</span>
<span>  password <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"earthdata_pw"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">token</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/appeears/man/rs_login.html" class="external-link">rs_login</a></span><span class="op">(</span>user <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"earthdata_un"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  task <span class="op">=</span> <span class="st">"polygon_test"</span>,</span>
<span>  subtask <span class="op">=</span> <span class="st">"subtask"</span>,</span>
<span>  start <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">time_range</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span>,</span>
<span>  end <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">time_range</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">)</span>,</span>
<span>  product <span class="op">=</span> <span class="va">collection</span>,</span>
<span>  layer <span class="op">=</span> <span class="va">variables</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># create the task</span></span>
<span><span class="va">task</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/appeears/man/rs_build_task.html" class="external-link">rs_build_task</a></span><span class="op">(</span></span>
<span>  df <span class="op">=</span> <span class="va">df</span>,</span>
<span>  roi <span class="op">=</span> <span class="va">roi</span>,</span>
<span>  format <span class="op">=</span> <span class="st">"netcdf4"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># request the task to be executed</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/appeears/man/rs_request.html" class="external-link">rs_request</a></span><span class="op">(</span></span>
<span>  request <span class="op">=</span> <span class="va">task</span>,</span>
<span>  user <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"earthdata_un"</span><span class="op">)</span>,</span>
<span>  transfer <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">r</span> <span class="op">&lt;-</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>,<span class="va">df</span><span class="op">$</span><span class="va">task</span>,<span class="st">"MOD13A3.061_1km_aid0001.nc"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">r</span></span>
<span id="cb2-41"><a href="#cb2-41" tabindex="-1"></a><span class="co">#&gt; class       : SpatRaster </span></span>
<span id="cb2-42"><a href="#cb2-42" tabindex="-1"></a><span class="co">#&gt; dimensions  : 1777, 1118, 24  (nrow, ncol, nlyr)</span></span>
<span id="cb2-43"><a href="#cb2-43" tabindex="-1"></a><span class="co">#&gt; resolution  : 0.008333333, 0.008333333  (x, y)</span></span>
<span id="cb2-44"><a href="#cb2-44" tabindex="-1"></a><span class="co">#&gt; extent      : 41.95, 51.26667, -26.175, -11.36667  (xmin, xmax, ymin, ymax)</span></span>
<span id="cb2-45"><a href="#cb2-45" tabindex="-1"></a><span class="co">#&gt; coord. ref. : +proj=longlat +datum=WGS84 +no_defs </span></span>
<span id="cb2-46"><a href="#cb2-46" tabindex="-1"></a><span class="co">#&gt; sources     : MOD13A3.061_1km_aid0001.nc:_1_km_monthly_NDVI  (12 layers) </span></span>
<span id="cb2-47"><a href="#cb2-47" tabindex="-1"></a><span class="co">#&gt;               MOD13A3.061_1km_aid0001.nc:_1_km_monthly_VI_Quality  (12 layers) </span></span>
<span id="cb2-48"><a href="#cb2-48" tabindex="-1"></a><span class="co">#&gt; varnames    : _1_km_monthly_NDVI (1 km monthly NDVI) </span></span>
<span id="cb2-49"><a href="#cb2-49" tabindex="-1"></a><span class="co">#&gt;               _1_km_monthly_VI_Quality (1 km monthly VI Quality) </span></span>
<span id="cb2-50"><a href="#cb2-50" tabindex="-1"></a><span class="co">#&gt; names       : _1_km~DVI_1, _1_km~DVI_2, _1_km~DVI_3, _1_km~DVI_4, _1_km~DVI_5, _1_km~DVI_6, ... </span></span>
<span id="cb2-51"><a href="#cb2-51" tabindex="-1"></a><span class="co">#&gt; unit        :        NDVI,        NDVI,        NDVI,        NDVI,        NDVI,        NDVI, ... </span></span>
<span id="cb2-52"><a href="#cb2-52" tabindex="-1"></a><span class="co">#&gt; time (days) : 2023-01-01 to 2023-12-01</span></span>
<span id="cb2-53"><a href="#cb2-53" tabindex="-1"></a></span>
<span></span>
<span><span class="va">appears_end_time</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.time</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="modisfast">
<code>modisfast</code><a class="anchor" aria-label="anchor" href="#modisfast"></a>
</h2>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">modisfast_start_time</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.time</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">roi</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="st">"madagascar"</span>, geom <span class="op">=</span> <span class="st">"POLYGON((41.95 -11.37,51.26 -11.37,51.26 -26.17,41.95 -26.17,41.95 -11.37))"</span><span class="op">)</span>, wkt<span class="op">=</span><span class="st">"geom"</span>, crs <span class="op">=</span> <span class="fl">4326</span><span class="op">)</span> </span>
<span><span class="va">time_range</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2023-01-01"</span>,<span class="st">"2023-12-31"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">collection</span> <span class="op">&lt;-</span> <span class="st">"MOD13A3.061"</span>  </span>
<span><span class="va">variables</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"_1_km_monthly_NDVI"</span><span class="op">)</span> </span>
<span></span>
<span><span class="va">log</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mf_login.html">mf_login</a></span><span class="op">(</span>credentials <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"earthdata_un"</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"earthdata_pw"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Checking credentials...</span></span>
<span></span>
<span><span class="va">urls</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mf_get_url.html">mf_get_url</a></span><span class="op">(</span></span>
<span>  collection <span class="op">=</span> <span class="va">collection</span>,</span>
<span>  variables <span class="op">=</span> <span class="va">variables</span>,</span>
<span>  roi <span class="op">=</span> <span class="va">roi</span>,</span>
<span>  time_range <span class="op">=</span> <span class="va">time_range</span></span>
<span> <span class="op">)</span></span>
<span><span class="co">#&gt; Building the URLs...</span></span>
<span><span class="co">#&gt; Estimated maximum size of data to be downloaded is 97 Mb</span></span>
<span></span>
<span><span class="va">res_dl</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mf_download_data.html">mf_download_data</a></span><span class="op">(</span><span class="va">urls</span>, parallel <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span>
<span><span class="co">#&gt; 5  datasets in total :  0  already downloaded and  5  datasets to download</span></span>
<span><span class="co">#&gt; Downloading the data ... (destination folder: /tmp/RtmpbWJaGX/modisfast_405f7f2ea9cf )</span></span>
<span><span class="co">#&gt; Estimated maximum size of data to be downloaded is ~ 97 Mb</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Actual size of downloaded data is 24 Mb</span></span>
<span></span>
<span><span class="va">r</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mf_import_data.html">mf_import_data</a></span><span class="op">(</span></span>
<span>  path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/basename.html" class="external-link">dirname</a></span><span class="op">(</span><span class="va">res_dl</span><span class="op">$</span><span class="va">destfile</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span>,</span>
<span>  collection <span class="op">=</span> <span class="va">collection</span>, </span>
<span>  proj_epsg <span class="op">=</span> <span class="fl">4326</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; Importing the dataset as a SpatRaster object...</span></span>
<span></span>
<span><span class="va">r</span></span>
<span><span class="co">#&gt; class       : SpatRaster </span></span>
<span><span class="co">#&gt; dimensions  : 1508, 1796, 12  (nrow, ncol, nlyr)</span></span>
<span><span class="co">#&gt; resolution  : 0.009861233, 0.009861233  (x, y)</span></span>
<span><span class="co">#&gt; extent      : 38.40805, 56.11883, -26.24157, -11.37083  (xmin, xmax, ymin, ymax)</span></span>
<span><span class="co">#&gt; coord. ref. : lon/lat WGS 84 (EPSG:4326) </span></span>
<span><span class="co">#&gt; source(s)   : memory</span></span>
<span><span class="co">#&gt; names       : _1_km~DVI_1, _1_km~DVI_2, _1_km~DVI_3, _1_km~DVI_4, _1_km~DVI_5, _1_km~DVI_6, ... </span></span>
<span><span class="co">#&gt; min values  :     -0.1992,  -0.1877457,  -0.1953000,  -0.1842000,   -0.197400,  -0.1993000, ... </span></span>
<span><span class="co">#&gt; max values  :      0.9764,   0.9764000,   0.9748999,   0.9725385,    0.973778,   0.9645233, ... </span></span>
<span><span class="co">#&gt; time (days) : 2023-01-01 to 2023-12-01</span></span>
<span></span>
<span><span class="va">modisfast_end_time</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.time</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="modistsp">
<code>MODIStsp</code><a class="anchor" aria-label="anchor" href="#modistsp"></a>
</h2>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">modistsp_start_time</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.time</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://docs.ropensci.org/MODIStsp/reference/MODIStsp.html" class="external-link">MODIStsp</a></span><span class="op">(</span>gui <span class="op">=</span> <span class="cn">FALSE</span>, </span>
<span>         parallel <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>         selprod <span class="op">=</span> <span class="st">"Vegetation_Indexes_Monthly_1Km (M*D13A3)"</span>,</span>
<span>         prod_version <span class="op">=</span> <span class="st">"061"</span>,</span>
<span>         bandsel <span class="op">=</span> <span class="st">"NDVI"</span>,</span>
<span>         sensor <span class="op">=</span> <span class="st">"Terra"</span>,</span>
<span>         start_date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">gsub</a></span><span class="op">(</span><span class="st">"-"</span>,<span class="st">"."</span>,<span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">time_range</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>,</span>
<span>         end_date   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">gsub</a></span><span class="op">(</span><span class="st">"-"</span>,<span class="st">"."</span>,<span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">time_range</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>,</span>
<span>         user <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"earthdata_un"</span><span class="op">)</span>,</span>
<span>         password <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"earthdata_pw"</span><span class="op">)</span>,</span>
<span>         bbox <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">41.95</span>,<span class="op">-</span><span class="fl">26.17</span>,<span class="fl">51.26</span>,<span class="op">-</span><span class="fl">11.37</span><span class="op">)</span>,</span>
<span>         download_range <span class="op">=</span> <span class="st">"Full"</span>,</span>
<span>         spatmeth <span class="op">=</span> <span class="st">"bbox"</span>,</span>
<span>         out_projsel <span class="op">=</span> <span class="st">"User Defined"</span>,</span>
<span>         output_proj <span class="op">=</span> <span class="st">"4326"</span>,</span>
<span>         out_res_sel <span class="op">=</span> <span class="st">"Native"</span>,</span>
<span>         out_format <span class="op">=</span> <span class="st">"GTiff"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">modistsp_end_time</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.time</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>The system returns that “Username and/or password are not valid”,
although they are those successfully used with both
<code>modisfast</code> and <code>appeears</code>. <strong>We could
therefore not finish the test with <code>MODIStsp</code>.</strong></p>
</div>
<div class="section level2">
<h2 id="modistools">
<code>MODIStools</code><a class="anchor" aria-label="anchor" href="#modistools"></a>
</h2>
<p>MOD13A3 is not available with <code>MODIStools</code>, so we run the
exercise with MOD21A2 (spatial resolution : 1 km ; temporal resolution :
8 day). Because the temporal resolution is 4 fold lower than MOD13A3 (8
days instead of 1 month), we also divide the time range by 4 to have
comparable data.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">modistools_start_time</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.time</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">subset</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/MODISTools/man/mt_subset.html" class="external-link">mt_subset</a></span><span class="op">(</span>product <span class="op">=</span> <span class="st">"MOD21A2"</span>,</span>
<span>                    lat <span class="op">=</span> <span class="op">-</span><span class="fl">19.5</span>,</span>
<span>                    lon <span class="op">=</span> <span class="fl">46.5</span>,</span>
<span>                    band <span class="op">=</span> <span class="st">"LST_Day_1KM"</span>,</span>
<span>                    start <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">time_range</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span>,</span>
<span>                    end <span class="op">=</span> <span class="st">"2023-03-12"</span>,</span>
<span>                    km_lr <span class="op">=</span> <span class="fl">500</span>,</span>
<span>                    km_ab <span class="op">=</span> <span class="fl">900</span>,</span>
<span>                    site_name <span class="op">=</span> <span class="st">"madagascar"</span>,</span>
<span>                    internal <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                    progress <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">modistools_end_time</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.time</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>The system returns that “Number of kilometers above or below the
subset location must be less than or equal to 100.”, which is not enough
for the whole size of Madagascar. <code>MODIStools</code> enables to
download data for 200 km x 200 km areas maximum. <strong>We could
therefore not finish the test with <code>MODIStools</code>.</strong></p>
</div>
<div class="section level2">
<h2 id="results">Results<a class="anchor" aria-label="anchor" href="#results"></a>
</h2>
<p><code>modisfast</code> and <code>appeears</code> passed the test,
<code>MODIStools</code> and <code>MODIStsp</code> did not (for different
reasons). Let’s see the duration of data processing access :</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="co"># with modisfast</span></span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a><span class="fu">round</span>(modisfast_end_time <span class="sc">-</span> modisfast_start_time,<span class="dv">2</span>)</span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a><span class="co">#&gt; Time difference of 1.21 mins</span></span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a></span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a><span class="co"># with appeears</span></span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a><span class="fu">round</span>(appears_end_time <span class="sc">-</span> appears_start_time,<span class="dv">2</span>)</span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a><span class="co">#&gt; Time difference of 3.91 mins</span></span></code></pre></div>
<p>We see here that accessing and importing the time-series with
<code>modisfast</code> was much faster than with <code>appeears</code> !
Once again, <code>appeears</code> has a variable latency period for
query processing, ranging from minutes to hours, due to server-side
post-processing. <code>modisfast</code> does not have such latency.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Paul Taconet, Nicolas Moiroux, French National Research Institute for Sustainable Development, IRD.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.9000.</p>
</div>

      </footer>
</div>






  </body>
</html>
