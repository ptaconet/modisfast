<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Comparison of performance with other similar R package • modisfast</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Comparison of performance with other similar R package">
<meta property="og:description" content="modisfast">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">modisfast</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.9.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/get_started.html">1. Get started</a>
    </li>
    <li>
      <a href="../articles/modisfast2.html">2. Get data on several regions or periods of interest simultaneously</a>
    </li>
     <li>
      <a href="../articles/use_case.html">3. Full use case</a>
    </li>
    <li>
      <a href="../articles/perf_comp.html">4. Comparison of performance with other similar R packages</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ptaconet/modisfast/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Comparison of performance with other similar R package</h1>
                        <h4 data-toc-skip class="author">Paul
Taconet</h4>

            <h4 data-toc-skip class="date">2024-11-07</h4>

      <small class="dont-index">Source: <a href="https://github.com/ptaconet/modisfast/blob/HEAD/vignettes/articles/perf_comp.Rmd" class="external-link"><code>vignettes/articles/perf_comp.Rmd</code></a></small>
      <div class="hidden name"><code>perf_comp.Rmd</code></div>

    </div>

<!--  To render this vignette, use : rmarkdown::render("vignettes/articles/perf_comp.Rmd", params = "ask") -->
<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>The goal of this exercise is to evaluate the performance of various R
packages designed for accessing MODIS data, specifically focusing on
data access and import times. To do this, we will download and import a
one-year monthly time series of MODIS Normalized Difference Vegetation
Index (NDVI) at a 1 km spatial resolution for the entire country of
Madagascar.</p>
</div>
<div id="other-r-packages-available-for-accessing-modis-data" class="section level1">
<h1>Other R packages available for accessing MODIS data</h1>
<p>The <a href="https://github.com/fdetsch/MODIS"><code>MODIS</code></a>
package offers access to some MODIS data through global online data
archives, but it lacks comprehensive documentation and was removed from
the CRAN repository in 2023 for policy violations. Furthermore, some of
its dependencies are not available anymore on CRAN.</p>
<p>The <a href="https://github.com/ropensci/MODIStsp"><code>MODIStsp</code></a>
package provides both a command-line and a user-friendly graphical
interface to extract MODIS data in standard TIFF or original HDF
formats. However, it does not allow to extract data at a sub-tile level
(i.e. spatial subsetting capabilities are limited), and it was also
removed from the CRAN repository in 2023 at the maintainer’s
request.</p>
<p>The <a href="https://github.com/ropensci/MODISTools"><code>MODIStools</code></a>
package serves as a programmatic interface to the <a href="https://modis.ornl.gov/data/modis_webservice.html">‘MODIS Land
Products Subsets’ web service</a>, providing access to 46 MODIS and
VIIRS collections. This package, available on CRAN, extracts data at
specific points or buffer zones around a point. However, for area-based
queries, the maximum area size is 200 km x 200 km. This makes it
suitable for point-based data extraction but less effective for wide
area-based queries.</p>
<p>The <a href="https://github.com/bluegreen-labs/appeears"><code>appeears</code></a>
package acts as a programmatic interface to the <a href="https://appeears.earthdatacloud.nasa.gov/">NASA AppEEARS API</a>
services. AppEEARS is a NASA-built application that offers a simple and
efficient way to access and transform geospatial data from a variety of
federal data archives (including MODIS and VIIRS, but not GPM). AppEEARS
allows accessing data from various NASA federal archives, including
MODIS and VIIRS, and enables users to subset geospatial datasets using
spatial, temporal, and band/layer parameters. Indeed, as for
<code>modisfast</code>, AppEEARS uses OPeNDAP. While similar to
<code>modisfast</code>, <code>appeears</code> offers a broader range of
data sources but has a latency period (ranging from minutes to hours)
for query processing due to server-side post-processing (mosaicking,
reprojection, etc.).</p>
<p>Finally, some R packages, such as <a href="https://github.com/r-spatial/rgee"><code>rgee</code></a> <span class="citation">[@rgee]</span>, rely on proprietary software or data
access protocols and are not discussed here for that reason.</p>
</div>
<div id="system-benchmarking" class="section level1">
<h1>System benchmarking</h1>
<p>Before proceeding to the test, some system benchmarking :</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">library</span>(benchmarkme)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="fu">Sys.time</span>()</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="co">#&gt; [1] &quot;2024-11-07 14:22:47 CEST&quot;</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="fu">Sys.info</span>()</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="co">#&gt;                                                            sysname                                                            release </span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="co">#&gt;                                                            &quot;Linux&quot;                                                 &quot;6.5.0-44-generic&quot; </span></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a><span class="co">#&gt;                                                            version                                                           nodename </span></span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a><span class="co">#&gt; &quot;#44~22.04.1-Ubuntu SMP PREEMPT_DYNAMIC Tue Jun 18 14:36:16 UTC 2&quot;                                           &quot;ptaconet-Latitude-7490&quot; </span></span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a><span class="co">#&gt;                                                            machine                                                              login </span></span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a><span class="co">#&gt;                                                           &quot;x86_64&quot;                                                         &quot;ptaconet&quot; </span></span>
<span id="cb1-11"><a href="#cb1-11" tabindex="-1"></a><span class="co">#&gt;                                                               user                                                     effective_user </span></span>
<span id="cb1-12"><a href="#cb1-12" tabindex="-1"></a><span class="co">#&gt;                                                         &quot;ptaconet&quot;                                                         &quot;ptaconet&quot;</span></span>
<span id="cb1-13"><a href="#cb1-13" tabindex="-1"></a>benchmarkme<span class="sc">::</span><span class="fu">get_r_version</span>()</span>
<span id="cb1-14"><a href="#cb1-14" tabindex="-1"></a><span class="co">#&gt; $platform</span></span>
<span id="cb1-15"><a href="#cb1-15" tabindex="-1"></a><span class="co">#&gt; [1] &quot;x86_64-pc-linux-gnu&quot;</span></span>
<span id="cb1-16"><a href="#cb1-16" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb1-17"><a href="#cb1-17" tabindex="-1"></a><span class="co">#&gt; $arch</span></span>
<span id="cb1-18"><a href="#cb1-18" tabindex="-1"></a><span class="co">#&gt; [1] &quot;x86_64&quot;</span></span>
<span id="cb1-19"><a href="#cb1-19" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb1-20"><a href="#cb1-20" tabindex="-1"></a><span class="co">#&gt; $os</span></span>
<span id="cb1-21"><a href="#cb1-21" tabindex="-1"></a><span class="co">#&gt; [1] &quot;linux-gnu&quot;</span></span>
<span id="cb1-22"><a href="#cb1-22" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb1-23"><a href="#cb1-23" tabindex="-1"></a><span class="co">#&gt; $system</span></span>
<span id="cb1-24"><a href="#cb1-24" tabindex="-1"></a><span class="co">#&gt; [1] &quot;x86_64, linux-gnu&quot;</span></span>
<span id="cb1-25"><a href="#cb1-25" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb1-26"><a href="#cb1-26" tabindex="-1"></a><span class="co">#&gt; $status</span></span>
<span id="cb1-27"><a href="#cb1-27" tabindex="-1"></a><span class="co">#&gt; [1] &quot;&quot;</span></span>
<span id="cb1-28"><a href="#cb1-28" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb1-29"><a href="#cb1-29" tabindex="-1"></a><span class="co">#&gt; $major</span></span>
<span id="cb1-30"><a href="#cb1-30" tabindex="-1"></a><span class="co">#&gt; [1] &quot;4&quot;</span></span>
<span id="cb1-31"><a href="#cb1-31" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb1-32"><a href="#cb1-32" tabindex="-1"></a><span class="co">#&gt; $minor</span></span>
<span id="cb1-33"><a href="#cb1-33" tabindex="-1"></a><span class="co">#&gt; [1] &quot;4.0&quot;</span></span>
<span id="cb1-34"><a href="#cb1-34" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb1-35"><a href="#cb1-35" tabindex="-1"></a><span class="co">#&gt; $year</span></span>
<span id="cb1-36"><a href="#cb1-36" tabindex="-1"></a><span class="co">#&gt; [1] &quot;2024&quot;</span></span>
<span id="cb1-37"><a href="#cb1-37" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb1-38"><a href="#cb1-38" tabindex="-1"></a><span class="co">#&gt; $month</span></span>
<span id="cb1-39"><a href="#cb1-39" tabindex="-1"></a><span class="co">#&gt; [1] &quot;04&quot;</span></span>
<span id="cb1-40"><a href="#cb1-40" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb1-41"><a href="#cb1-41" tabindex="-1"></a><span class="co">#&gt; $day</span></span>
<span id="cb1-42"><a href="#cb1-42" tabindex="-1"></a><span class="co">#&gt; [1] &quot;24&quot;</span></span>
<span id="cb1-43"><a href="#cb1-43" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb1-44"><a href="#cb1-44" tabindex="-1"></a><span class="co">#&gt; $`svn rev`</span></span>
<span id="cb1-45"><a href="#cb1-45" tabindex="-1"></a><span class="co">#&gt; [1] &quot;86474&quot;</span></span>
<span id="cb1-46"><a href="#cb1-46" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb1-47"><a href="#cb1-47" tabindex="-1"></a><span class="co">#&gt; $language</span></span>
<span id="cb1-48"><a href="#cb1-48" tabindex="-1"></a><span class="co">#&gt; [1] &quot;R&quot;</span></span>
<span id="cb1-49"><a href="#cb1-49" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb1-50"><a href="#cb1-50" tabindex="-1"></a><span class="co">#&gt; $version.string</span></span>
<span id="cb1-51"><a href="#cb1-51" tabindex="-1"></a><span class="co">#&gt; [1] &quot;R version 4.4.0 (2024-04-24)&quot;</span></span>
<span id="cb1-52"><a href="#cb1-52" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb1-53"><a href="#cb1-53" tabindex="-1"></a><span class="co">#&gt; $nickname</span></span>
<span id="cb1-54"><a href="#cb1-54" tabindex="-1"></a><span class="co">#&gt; [1] &quot;Puppy Cup&quot;</span></span>
<span id="cb1-55"><a href="#cb1-55" tabindex="-1"></a>benchmarkme<span class="sc">::</span><span class="fu">get_cpu</span>()</span>
<span id="cb1-56"><a href="#cb1-56" tabindex="-1"></a><span class="co">#&gt; $vendor_id</span></span>
<span id="cb1-57"><a href="#cb1-57" tabindex="-1"></a><span class="co">#&gt; [1] &quot;GenuineIntel&quot;</span></span>
<span id="cb1-58"><a href="#cb1-58" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb1-59"><a href="#cb1-59" tabindex="-1"></a><span class="co">#&gt; $model_name</span></span>
<span id="cb1-60"><a href="#cb1-60" tabindex="-1"></a><span class="co">#&gt; [1] &quot;Intel(R) Core(TM) i7-8650U CPU @ 1.90GHz&quot;</span></span>
<span id="cb1-61"><a href="#cb1-61" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb1-62"><a href="#cb1-62" tabindex="-1"></a><span class="co">#&gt; $no_of_cores</span></span>
<span id="cb1-63"><a href="#cb1-63" tabindex="-1"></a><span class="co">#&gt; [1] 8</span></span>
<span id="cb1-64"><a href="#cb1-64" tabindex="-1"></a>benchmarkme<span class="sc">::</span><span class="fu">get_ram</span>()</span>
<span id="cb1-65"><a href="#cb1-65" tabindex="-1"></a><span class="co">#&gt; 33.5 GB</span></span></code></pre></div>
</div>
<div id="appeears" class="section level1">
<h1><code>appeears</code></h1>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a>appears_start_time <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>()</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="fu">library</span>(appeears)</span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="fu">library</span>(terra)</span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a>roi <span class="ot">&lt;-</span> <span class="fu">st_as_sf</span>(<span class="fu">data.frame</span>(<span class="at">id =</span> <span class="st">&quot;madagascar&quot;</span>, <span class="at">geom =</span> <span class="st">&quot;POLYGON((41.95 -11.37,51.26 -11.37,51.26 -26.17,41.95 -26.17,41.95 -11.37))&quot;</span>), <span class="at">wkt=</span><span class="st">&quot;geom&quot;</span>, <span class="at">crs =</span> <span class="dv">4326</span>) </span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a>time_range <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="fu">c</span>(<span class="st">&quot;2023-01-01&quot;</span>,<span class="st">&quot;2023-12-31&quot;</span>))</span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a>collection <span class="ot">&lt;-</span> <span class="st">&quot;MOD13A3.061&quot;</span>  </span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a>variables <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;_1_km_monthly_NDVI&quot;</span>) </span>
<span id="cb2-11"><a href="#cb2-11" tabindex="-1"></a></span>
<span id="cb2-12"><a href="#cb2-12" tabindex="-1"></a>token <span class="ot">&lt;-</span> <span class="fu">rs_login</span>(<span class="at">user =</span> <span class="fu">Sys.getenv</span>(<span class="st">&quot;earthdata_un&quot;</span>))</span>
<span id="cb2-13"><a href="#cb2-13" tabindex="-1"></a></span>
<span id="cb2-14"><a href="#cb2-14" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb2-15"><a href="#cb2-15" tabindex="-1"></a>  <span class="at">task =</span> <span class="st">&quot;polygon_test&quot;</span>,</span>
<span id="cb2-16"><a href="#cb2-16" tabindex="-1"></a>  <span class="at">subtask =</span> <span class="st">&quot;subtask&quot;</span>,</span>
<span id="cb2-17"><a href="#cb2-17" tabindex="-1"></a>  <span class="at">start =</span> <span class="fu">as.character</span>(time_range[<span class="dv">1</span>]),</span>
<span id="cb2-18"><a href="#cb2-18" tabindex="-1"></a>  <span class="at">end =</span> <span class="fu">as.character</span>(time_range[<span class="dv">2</span>]),</span>
<span id="cb2-19"><a href="#cb2-19" tabindex="-1"></a>  <span class="at">product =</span> collection,</span>
<span id="cb2-20"><a href="#cb2-20" tabindex="-1"></a>  <span class="at">layer =</span> variables</span>
<span id="cb2-21"><a href="#cb2-21" tabindex="-1"></a>)</span>
<span id="cb2-22"><a href="#cb2-22" tabindex="-1"></a></span>
<span id="cb2-23"><a href="#cb2-23" tabindex="-1"></a><span class="co"># create the task</span></span>
<span id="cb2-24"><a href="#cb2-24" tabindex="-1"></a>task <span class="ot">&lt;-</span> <span class="fu">rs_build_task</span>(</span>
<span id="cb2-25"><a href="#cb2-25" tabindex="-1"></a>  <span class="at">df =</span> df,</span>
<span id="cb2-26"><a href="#cb2-26" tabindex="-1"></a>  <span class="at">roi =</span> roi,</span>
<span id="cb2-27"><a href="#cb2-27" tabindex="-1"></a>  <span class="at">format =</span> <span class="st">&quot;netcdf4&quot;</span></span>
<span id="cb2-28"><a href="#cb2-28" tabindex="-1"></a>)</span>
<span id="cb2-29"><a href="#cb2-29" tabindex="-1"></a></span>
<span id="cb2-30"><a href="#cb2-30" tabindex="-1"></a><span class="co"># request the task to be executed</span></span>
<span id="cb2-31"><a href="#cb2-31" tabindex="-1"></a><span class="fu">rs_request</span>(</span>
<span id="cb2-32"><a href="#cb2-32" tabindex="-1"></a>  <span class="at">request =</span> task,</span>
<span id="cb2-33"><a href="#cb2-33" tabindex="-1"></a>  <span class="at">user =</span> <span class="fu">Sys.getenv</span>(<span class="st">&quot;earthdata_un&quot;</span>),</span>
<span id="cb2-34"><a href="#cb2-34" tabindex="-1"></a>  <span class="at">transfer =</span> <span class="cn">TRUE</span>,</span>
<span id="cb2-35"><a href="#cb2-35" tabindex="-1"></a>  <span class="at">verbose =</span> <span class="cn">TRUE</span></span>
<span id="cb2-36"><a href="#cb2-36" tabindex="-1"></a>)</span>
<span id="cb2-37"><a href="#cb2-37" tabindex="-1"></a></span>
<span id="cb2-38"><a href="#cb2-38" tabindex="-1"></a>r <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">rast</span>(<span class="fu">file.path</span>(<span class="fu">tempdir</span>(),df<span class="sc">$</span>task,<span class="st">&quot;MOD13A3.061_1km_aid0001.nc&quot;</span>))</span>
<span id="cb2-39"><a href="#cb2-39" tabindex="-1"></a></span>
<span id="cb2-40"><a href="#cb2-40" tabindex="-1"></a>r</span>
<span id="cb2-41"><a href="#cb2-41" tabindex="-1"></a><span class="co">#&gt; class       : SpatRaster </span></span>
<span id="cb2-42"><a href="#cb2-42" tabindex="-1"></a><span class="co">#&gt; dimensions  : 1777, 1118, 24  (nrow, ncol, nlyr)</span></span>
<span id="cb2-43"><a href="#cb2-43" tabindex="-1"></a><span class="co">#&gt; resolution  : 0.008333333, 0.008333333  (x, y)</span></span>
<span id="cb2-44"><a href="#cb2-44" tabindex="-1"></a><span class="co">#&gt; extent      : 41.95, 51.26667, -26.175, -11.36667  (xmin, xmax, ymin, ymax)</span></span>
<span id="cb2-45"><a href="#cb2-45" tabindex="-1"></a><span class="co">#&gt; coord. ref. : +proj=longlat +datum=WGS84 +no_defs </span></span>
<span id="cb2-46"><a href="#cb2-46" tabindex="-1"></a><span class="co">#&gt; sources     : MOD13A3.061_1km_aid0001.nc:_1_km_monthly_NDVI  (12 layers) </span></span>
<span id="cb2-47"><a href="#cb2-47" tabindex="-1"></a><span class="co">#&gt;               MOD13A3.061_1km_aid0001.nc:_1_km_monthly_VI_Quality  (12 layers) </span></span>
<span id="cb2-48"><a href="#cb2-48" tabindex="-1"></a><span class="co">#&gt; varnames    : _1_km_monthly_NDVI (1 km monthly NDVI) </span></span>
<span id="cb2-49"><a href="#cb2-49" tabindex="-1"></a><span class="co">#&gt;               _1_km_monthly_VI_Quality (1 km monthly VI Quality) </span></span>
<span id="cb2-50"><a href="#cb2-50" tabindex="-1"></a><span class="co">#&gt; names       : _1_km~DVI_1, _1_km~DVI_2, _1_km~DVI_3, _1_km~DVI_4, _1_km~DVI_5, _1_km~DVI_6, ... </span></span>
<span id="cb2-51"><a href="#cb2-51" tabindex="-1"></a><span class="co">#&gt; unit        :        NDVI,        NDVI,        NDVI,        NDVI,        NDVI,        NDVI, ... </span></span>
<span id="cb2-52"><a href="#cb2-52" tabindex="-1"></a><span class="co">#&gt; time (days) : 2023-01-01 to 2023-12-01</span></span>
<span id="cb2-53"><a href="#cb2-53" tabindex="-1"></a></span>
<span id="cb2-54"><a href="#cb2-54" tabindex="-1"></a>appears_end_time <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>()</span></code></pre></div>
</div>
<div id="modisfast" class="section level1">
<h1><code>modisfast</code></h1>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>modisfast_start_time <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>()</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="fu">library</span>(modisfast)</span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a><span class="fu">library</span>(terra)</span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a>roi <span class="ot">&lt;-</span> <span class="fu">st_as_sf</span>(<span class="fu">data.frame</span>(<span class="at">id =</span> <span class="st">&quot;madagascar&quot;</span>, <span class="at">geom =</span> <span class="st">&quot;POLYGON((41.95 -11.37,51.26 -11.37,51.26 -26.17,41.95 -26.17,41.95 -11.37))&quot;</span>), <span class="at">wkt=</span><span class="st">&quot;geom&quot;</span>, <span class="at">crs =</span> <span class="dv">4326</span>) </span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a>time_range <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="fu">c</span>(<span class="st">&quot;2023-01-01&quot;</span>,<span class="st">&quot;2023-12-31&quot;</span>))</span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a>collection <span class="ot">&lt;-</span> <span class="st">&quot;MOD13A3.061&quot;</span>  </span>
<span id="cb3-10"><a href="#cb3-10" tabindex="-1"></a>variables <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;_1_km_monthly_NDVI&quot;</span>) </span>
<span id="cb3-11"><a href="#cb3-11" tabindex="-1"></a></span>
<span id="cb3-12"><a href="#cb3-12" tabindex="-1"></a>log <span class="ot">&lt;-</span> <span class="fu">mf_login</span>(<span class="at">credentials =</span> <span class="fu">c</span>(<span class="fu">Sys.getenv</span>(<span class="st">&quot;earthdata_un&quot;</span>), <span class="fu">Sys.getenv</span>(<span class="st">&quot;earthdata_pw&quot;</span>)))</span>
<span id="cb3-13"><a href="#cb3-13" tabindex="-1"></a><span class="co">#&gt; Checking credentials...</span></span>
<span id="cb3-14"><a href="#cb3-14" tabindex="-1"></a><span class="co">#&gt; Successfull login to Earthdata</span></span>
<span id="cb3-15"><a href="#cb3-15" tabindex="-1"></a></span>
<span id="cb3-16"><a href="#cb3-16" tabindex="-1"></a>urls <span class="ot">&lt;-</span> <span class="fu">mf_get_url</span>(</span>
<span id="cb3-17"><a href="#cb3-17" tabindex="-1"></a>  <span class="at">collection =</span> collection,</span>
<span id="cb3-18"><a href="#cb3-18" tabindex="-1"></a>  <span class="at">variables =</span> variables,</span>
<span id="cb3-19"><a href="#cb3-19" tabindex="-1"></a>  <span class="at">roi =</span> roi,</span>
<span id="cb3-20"><a href="#cb3-20" tabindex="-1"></a>  <span class="at">time_range =</span> time_range</span>
<span id="cb3-21"><a href="#cb3-21" tabindex="-1"></a> )</span>
<span id="cb3-22"><a href="#cb3-22" tabindex="-1"></a><span class="co">#&gt; Building the URLs...</span></span>
<span id="cb3-23"><a href="#cb3-23" tabindex="-1"></a><span class="co">#&gt; OK</span></span>
<span id="cb3-24"><a href="#cb3-24" tabindex="-1"></a></span>
<span id="cb3-25"><a href="#cb3-25" tabindex="-1"></a>res_dl <span class="ot">&lt;-</span> <span class="fu">mf_download_data</span>(urls, <span class="at">parallel =</span> T)</span>
<span id="cb3-26"><a href="#cb3-26" tabindex="-1"></a><span class="co">#&gt; 5  datasets in total :  0  already downloaded and  5  datasets to download</span></span>
<span id="cb3-27"><a href="#cb3-27" tabindex="-1"></a><span class="co">#&gt; Downloading the data...</span></span>
<span id="cb3-28"><a href="#cb3-28" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb3-29"><a href="#cb3-29" tabindex="-1"></a><span class="co">#&gt; Data were all properly downloaded under the folder(s)  /tmp/RtmpVL1j3M/modisfast_6e25477426a4/data/madagascar/MOD13A3.061 </span></span>
<span id="cb3-30"><a href="#cb3-30" tabindex="-1"></a><span class="co">#&gt; **To import the data in R, use the function modisfast::mf_import_data() rather than terra::rast() or stars::read_stars(). More info at help(mf_import_data)**</span></span>
<span id="cb3-31"><a href="#cb3-31" tabindex="-1"></a></span>
<span id="cb3-32"><a href="#cb3-32" tabindex="-1"></a>r <span class="ot">&lt;-</span> <span class="fu">mf_import_data</span>(</span>
<span id="cb3-33"><a href="#cb3-33" tabindex="-1"></a>  <span class="at">path =</span> <span class="fu">dirname</span>(res_dl<span class="sc">$</span>destfile[<span class="dv">1</span>]),</span>
<span id="cb3-34"><a href="#cb3-34" tabindex="-1"></a>  <span class="at">collection =</span> collection, </span>
<span id="cb3-35"><a href="#cb3-35" tabindex="-1"></a>  <span class="at">proj_epsg =</span> <span class="dv">4326</span></span>
<span id="cb3-36"><a href="#cb3-36" tabindex="-1"></a>  )</span>
<span id="cb3-37"><a href="#cb3-37" tabindex="-1"></a></span>
<span id="cb3-38"><a href="#cb3-38" tabindex="-1"></a>r</span>
<span id="cb3-39"><a href="#cb3-39" tabindex="-1"></a><span class="co">#&gt; class       : SpatRaster </span></span>
<span id="cb3-40"><a href="#cb3-40" tabindex="-1"></a><span class="co">#&gt; dimensions  : 1509, 1789, 12  (nrow, ncol, nlyr)</span></span>
<span id="cb3-41"><a href="#cb3-41" tabindex="-1"></a><span class="co">#&gt; resolution  : 0.009858459, 0.009858459  (x, y)</span></span>
<span id="cb3-42"><a href="#cb3-42" tabindex="-1"></a><span class="co">#&gt; extent      : 38.40805, 56.04484, -26.24725, -11.37083  (xmin, xmax, ymin, ymax)</span></span>
<span id="cb3-43"><a href="#cb3-43" tabindex="-1"></a><span class="co">#&gt; coord. ref. : lon/lat WGS 84 (EPSG:4326) </span></span>
<span id="cb3-44"><a href="#cb3-44" tabindex="-1"></a><span class="co">#&gt; source(s)   : memory</span></span>
<span id="cb3-45"><a href="#cb3-45" tabindex="-1"></a><span class="co">#&gt; names       : _1_km~DVI_1, _1_km~DVI_2, _1_km~DVI_3, _1_km~DVI_4, _1_km~DVI_5, _1_km~DVI_6, ... </span></span>
<span id="cb3-46"><a href="#cb3-46" tabindex="-1"></a><span class="co">#&gt; min values  :     -0.1992,  -0.1876327,  -0.1933123,  -0.1836101,     -0.1974,     -0.1914, ... </span></span>
<span id="cb3-47"><a href="#cb3-47" tabindex="-1"></a><span class="co">#&gt; max values  :      0.9764,   0.9764000,   0.9722000,   0.9912000,      0.9912,      0.9608, ... </span></span>
<span id="cb3-48"><a href="#cb3-48" tabindex="-1"></a><span class="co">#&gt; time (days) : 2023-01-01 to 2023-12-01</span></span>
<span id="cb3-49"><a href="#cb3-49" tabindex="-1"></a></span>
<span id="cb3-50"><a href="#cb3-50" tabindex="-1"></a>modisfast_end_time <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>()</span></code></pre></div>
</div>
<div id="modis" class="section level1">
<h1><code>MODIS</code></h1>
<p>We were not able to install the <code>MODIS</code> package, because
some of the dependencies were not available for our version of R.
<strong>We could therefore not finish the test with
<code>MODIS</code>.</strong></p>
</div>
<div id="modistsp" class="section level1">
<h1><code>MODIStsp</code></h1>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a>modistsp_start_time <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>()</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a><span class="fu">library</span>(MODIStsp)</span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a><span class="fu">MODIStsp</span>(<span class="at">gui =</span> <span class="cn">FALSE</span>, </span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a>         <span class="at">parallel =</span> <span class="cn">TRUE</span>,</span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a>         <span class="at">selprod =</span> <span class="st">&quot;Vegetation_Indexes_Monthly_1Km (M*D13A3)&quot;</span>,</span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a>         <span class="at">prod_version =</span> <span class="st">&quot;061&quot;</span>,</span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a>         <span class="at">bandsel =</span> <span class="st">&quot;NDVI&quot;</span>,</span>
<span id="cb4-10"><a href="#cb4-10" tabindex="-1"></a>         <span class="at">sensor =</span> <span class="st">&quot;Terra&quot;</span>,</span>
<span id="cb4-11"><a href="#cb4-11" tabindex="-1"></a>         <span class="at">start_date =</span> <span class="fu">gsub</span>(<span class="st">&quot;-&quot;</span>,<span class="st">&quot;.&quot;</span>,<span class="fu">as.character</span>(time_range[<span class="dv">1</span>])),</span>
<span id="cb4-12"><a href="#cb4-12" tabindex="-1"></a>         <span class="at">end_date   =</span> <span class="fu">gsub</span>(<span class="st">&quot;-&quot;</span>,<span class="st">&quot;.&quot;</span>,<span class="fu">as.character</span>(time_range[<span class="dv">2</span>])),</span>
<span id="cb4-13"><a href="#cb4-13" tabindex="-1"></a>         <span class="at">user =</span> <span class="fu">Sys.getenv</span>(<span class="st">&quot;earthdata_un&quot;</span>),</span>
<span id="cb4-14"><a href="#cb4-14" tabindex="-1"></a>         <span class="at">password =</span> <span class="fu">Sys.getenv</span>(<span class="st">&quot;earthdata_pw&quot;</span>),</span>
<span id="cb4-15"><a href="#cb4-15" tabindex="-1"></a>         <span class="at">bbox =</span> <span class="fu">c</span>(<span class="fl">41.95</span>,<span class="sc">-</span><span class="fl">26.17</span>,<span class="fl">51.26</span>,<span class="sc">-</span><span class="fl">11.37</span>),</span>
<span id="cb4-16"><a href="#cb4-16" tabindex="-1"></a>         <span class="at">download_range =</span> <span class="st">&quot;Full&quot;</span>,</span>
<span id="cb4-17"><a href="#cb4-17" tabindex="-1"></a>         <span class="at">spatmeth =</span> <span class="st">&quot;bbox&quot;</span>,</span>
<span id="cb4-18"><a href="#cb4-18" tabindex="-1"></a>         <span class="at">out_projsel =</span> <span class="st">&quot;User Defined&quot;</span>,</span>
<span id="cb4-19"><a href="#cb4-19" tabindex="-1"></a>         <span class="at">output_proj =</span> <span class="st">&quot;4326&quot;</span>,</span>
<span id="cb4-20"><a href="#cb4-20" tabindex="-1"></a>         <span class="at">out_res_sel =</span> <span class="st">&quot;Native&quot;</span>,</span>
<span id="cb4-21"><a href="#cb4-21" tabindex="-1"></a>         <span class="at">out_format =</span> <span class="st">&quot;GTiff&quot;</span></span>
<span id="cb4-22"><a href="#cb4-22" tabindex="-1"></a>)</span>
<span id="cb4-23"><a href="#cb4-23" tabindex="-1"></a><span class="co">#&gt; Error in MODIStsp_download(modislist, proc_opts$out_folder_mod, download_server, : Username and/or password are not valid. Please provide</span></span>
<span id="cb4-24"><a href="#cb4-24" tabindex="-1"></a><span class="co">#&gt;              valid ones!</span></span>
<span id="cb4-25"><a href="#cb4-25" tabindex="-1"></a></span>
<span id="cb4-26"><a href="#cb4-26" tabindex="-1"></a>modistsp_end_time <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>()</span></code></pre></div>
<p>The system returns that “Username and/or password are not valid”,
although they are those successfully used with both
<code>modisfast</code> and <code>appeears</code>. <strong>We could
therefore not finish the test with <code>MODIStsp</code>.</strong></p>
</div>
<div id="modistools" class="section level1">
<h1><code>MODIStools</code></h1>
<p>MOD13A3 is not available with <code>MODIStools</code>, so we run the
exercise with MOD21A2 (spatial resolution : 1 km ; temporal resolution :
8 day). Because the temporal resolution is 4 fold lower than MOD13A3 (8
days instead of 1 month), we also divide the time range by 4 to have
comparable data.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>modistools_start_time <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>()</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a><span class="fu">library</span>(MODISTools)</span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a>subset <span class="ot">&lt;-</span> <span class="fu">mt_subset</span>(<span class="at">product =</span> <span class="st">&quot;MOD21A2&quot;</span>,</span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a>                    <span class="at">lat =</span> <span class="sc">-</span><span class="fl">19.5</span>,</span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a>                    <span class="at">lon =</span> <span class="fl">46.5</span>,</span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a>                    <span class="at">band =</span> <span class="st">&quot;LST_Day_1KM&quot;</span>,</span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a>                    <span class="at">start =</span> <span class="fu">as.character</span>(time_range[<span class="dv">1</span>]),</span>
<span id="cb5-10"><a href="#cb5-10" tabindex="-1"></a>                    <span class="at">end =</span> <span class="st">&quot;2023-03-12&quot;</span>,</span>
<span id="cb5-11"><a href="#cb5-11" tabindex="-1"></a>                    <span class="at">km_lr =</span> <span class="dv">500</span>,</span>
<span id="cb5-12"><a href="#cb5-12" tabindex="-1"></a>                    <span class="at">km_ab =</span> <span class="dv">900</span>,</span>
<span id="cb5-13"><a href="#cb5-13" tabindex="-1"></a>                    <span class="at">site_name =</span> <span class="st">&quot;madagascar&quot;</span>,</span>
<span id="cb5-14"><a href="#cb5-14" tabindex="-1"></a>                    <span class="at">internal =</span> <span class="cn">TRUE</span>,</span>
<span id="cb5-15"><a href="#cb5-15" tabindex="-1"></a>                    <span class="at">progress =</span> <span class="cn">FALSE</span>)</span>
<span id="cb5-16"><a href="#cb5-16" tabindex="-1"></a><span class="co">#&gt; Error in do.call(&quot;rbind&quot;, subset_data$data): le second argument doit être une liste</span></span>
<span id="cb5-17"><a href="#cb5-17" tabindex="-1"></a></span>
<span id="cb5-18"><a href="#cb5-18" tabindex="-1"></a>modistools_end_time <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>()</span></code></pre></div>
<p>The system returns that “Number of kilometers above or below the
subset location must be less than or equal to 100.”, which is not enough
for the whole size of Madagascar. <code>MODIStools</code> enables to
download data for 200 km x 200 km areas maximum. <strong>We could
therefore not finish the test with <code>MODIStools</code>.</strong></p>
</div>
<div id="results" class="section level1">
<h1>Results</h1>
<p><code>modisfast</code> and <code>appeears</code> passed the test,
while <code>MODIS</code>, <code>MODIStools</code> and
<code>MODIStsp</code> did not (for different reasons). Let’s see the
duration of data processing access :</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="co"># with modisfast</span></span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a><span class="fu">round</span>(modisfast_end_time <span class="sc">-</span> modisfast_start_time,<span class="dv">2</span>)</span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a><span class="co">#&gt; Time difference of 1.21 mins</span></span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a></span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a><span class="co"># with appeears</span></span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a><span class="fu">round</span>(appears_end_time <span class="sc">-</span> appears_start_time,<span class="dv">2</span>)</span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a><span class="co">#&gt; Time difference of 3.91 mins</span></span></code></pre></div>
<p>We see here that accessing and importing the time-series with
<code>modisfast</code> was much faster than with <code>appeears</code> !
Once again, <code>appeears</code> has a variable latency period for
query processing, ranging from minutes to hours, due to server-side
post-processing. <code>modisfast</code> does not have such latency.</p>
</div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Paul Taconet, Nicolas Moiroux, French National Research Institute for Sustainable Development, IRD.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer>
</div>






  </body>
</html>
